{% extends 'base.html' %}

{% block head %}
<div class="panel panel--dark">
    <h1 class="display-3 flex flex-center" style="margin-top: 75px;"></h1>
</div>
<div class="row base-margin-top flex flex-center">
    <div class="col-md-6">
        <div class="steps">
            <div class="step visited">
                <div class="step__icon">
                    <span class="icon-check"></span>
                </div>
                <div class="step__label">Instructions</div>
            </div>
            <div class="step visited">
                <span class="step__icon">1</span>
                <div class="step__label">TASK 1</div>
            </div>

            <div class="step visited">
                <div class="step__icon">2</div>
                <div class="step__label">TASK 2</div>
            </div>
            <div class="step visited">
                <div class="step__icon">3</div>
                <div class="step__label">TASK 3</div>
            </div>
            <div class="step active">
                <div class="step__icon">4</div>
                <div class="step__label">TASK 4</div>
            </div>
            <div class="step">
                <div class="step__icon">5</div>
                <div class="step__label">TASK 5</div>
            </div>
            <div class="step">
                <div class="step__icon">6</div>
                <div class="step__label">TASK 6</div>
            </div>
            <div class="step">
                <div class="step__icon">END</div>
                <div class="step__label">TASK 7</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block body%}
<div class="row">
    <div class="col-md-2">
        <ul id="vleft" class="tabs tabs--vertical">
            <li id="vleft-1" class="tab">
                <a tabindex="0" href="/">INSTRUCTIONS</a>
            </li>
            <li id="vleft-2" class="tab">
                <a tabindex="0" href="/task1">TASK 1</a>
            </li>
            <li id="vleft-3" class="tab">
                <a tabindex="0" href="/task2">TASK 2</a>
            </li>
            <li id="vleft-4" class="tab">
                <a tabindex="0" href="/task3">TASK 3</a>
            </li>
            <li id="vleft-5" class="tab">
                <a tabindex="0" href="/task4">TASK 4</a>
            </li>
            <li id="vleft-6" class="tab">
                <a tabindex="0" href="/task5">TASK 5</a>
            </li>
            <li id="vleft-7" class="tab">
                <a tabindex="0" href="/task6">TASK 6</a>
            </li>
            <li id="vleft-8" class="tab active">
                <a tabindex="0" href="/task7">TASK 7</a>
            </li>
            <li id="vleft-9" class="tab">
                <a tabindex="0" href="/task8">TASK 8</a>
            </li>
            <li id="vleft-10" class="tab">
                <a tabindex="0" href="/task9">TASK 9</a>
            </li>
            <li id="vleft-11" class="tab">
                <a tabindex="0" href="/task10">TASK 10</a>
            </li>
            <li id="vleft-12" class="tab">
                <a tabindex="0">SOLUTIONS</a>
            </li>
        </ul>
    </div>
    <div class="col-md-9">
        <div id="vleft-content" class="tab-content">
            <div id="vleft-1-content" class="tab-pane">
                <p>INSTRUCTIONS</p>
            </div>
            <div id="vleft-2-content" class="tab-pane">
                <p>TASK 1</p>
            </div>
            <div id="vleft-3-content" class="tab-pane">
                <p>TASK 2</p>
            </div>
            <div id="vleft-4-content" class="tab-pane">
                <p>TASK 3</p>
            <div id="vleft-5-content" class="tab-pane active">
                <p >TASK 4</p>
            <div id="vleft-6-content" class="tab-pane">
                <p>TASK 5</p>
            </div>
            <div id="vleft-7-content" class="tab-pane">
                <p >TASK 6</p>
            </div>
            <div id="vleft-8-content" class="tab-pane active">
                <p class="text-size-28 text-weight-300">TASK 7</p>
            </div>
            <div id="vleft-9-content" class="tab-pane">
                <p>TASK 8</p>
            </div>
            <div id="vleft-10-content" class="tab-pane">
                <p>TASK 9</p>
            </div>
            <div id="vleft-11-content" class="tab-pane">
                <p>TASK 10</p>
            </div>
            <div id="vleft-12-content" class="tab-pane">
                <p>SOLUTIONS</p>
            </div>
        </div>
    </div>
</div>
<body class="cui" data-theme="dark">
<h4 class="text-size-28 text-weight-300 panel panel--dark">Agent Status in UI</h4>
    <p class="text-size-18 text-weight-300 base-margin-top text-justify">

        <br>We use:<br>
        1. registry.agt.thousandeyes.com to obtain ID and register (only first time when ID is not available)<br>
        2. sc1.agt.thousandeyes.com and c1.agt.thousandeyes.com for check-in, communication channel<br>
        3. data1.agt.thousandeyes.com to submit test results<br>
        Now that we know what we are looking for, lets check logs.
    </p>
    <pre>
        2022-12-01 10:27:54.235 DEBUG [d8ff9700] [te.agent.DataSubmitter] {} Trying to get results for https://data1.agt.thousandeyes.com/mixed
        2022-12-01 10:27:54.235 DEBUG [d8ff9700] [te.agent.DataSubmitter] {} Trying to get results for https://data1.agt.thousandeyes.com/screenshots
        2022-12-01 10:27:54.236 DEBUG [d8ff9700] [te.agent.DataSubmitter] {} Trying to get results for https://data1.agt.thousandeyes.com/load
        2022-12-01 10:27:54.236 DEBUG [d8ff9700] [te.agent.DataSubmitter] {} Committing 1 data points to https://data1.agt.thousandeyes.com/load
        2022-12-01 10:27:54.236 DEBUG [d8ff9700] [te.agent.EndpointClient] {} Posting result to streaming endpoint https://data1.agt.thousandeyes.com
    <span style="color: red">    2022-12-01 10:29:24.301 ERROR [d8ff9700] [te.agent.EndpointClient] {} Error posting results to https://data1.agt.thousandeyes.com: Couldn't connect to server</span>
    </pre>
    <p class="text-size-18 text-weight-300 base-margin-top text-justify">
        So there is an error related to data1 connection. Let's check if this is true and pinpoint the issue!
    </p>
    <pre>
        $ nslookup data1.agt.thousandeyes.com
        Server:		127.0.0.53
        Address:	127.0.0.53#53

        Non-authoritative answer:
        data1.agt.thousandeyes.com	canonical name = a0d9392c0c2df89c7.dualstack.awsglobalaccelerator.com.
        Name:	a0d9392c0c2df89c7.dualstack.awsglobalaccelerator.com
        Address: 13.248.204.16
        Name:	a0d9392c0c2df89c7.dualstack.awsglobalaccelerator.com
        Address: 76.223.76.176
        Name:	a0d9392c0c2df89c7.dualstack.awsglobalaccelerator.com
        Address: 2600:9000:a71c:9fff:9fd2:e70e:cae7:1ab7
        Name:	a0d9392c0c2df89c7.dualstack.awsglobalaccelerator.com
        Address: 2600:9000:a402:3156:1a3c:ceb1:d30c:dabe


        $ ping data1.agt.thousandeyes.com
        PING a0d9392c0c2df89c7.dualstack.awsglobalaccelerator.com (76.223.76.176) 56(84) bytes of data.
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=1 ttl=114 time=8.66 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=2 ttl=114 time=9.10 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=3 ttl=114 time=10.1 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=4 ttl=114 time=9.13 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=5 ttl=114 time=9.67 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=6 ttl=114 time=9.70 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=7 ttl=114 time=13.7 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=8 ttl=114 time=9.36 ms
        64 bytes from a0d9392c0c2df89c7.awsglobalaccelerator.com (76.223.76.176): icmp_seq=9 ttl=114 time=9.13 ms
        ^C
        --- a0d9392c0c2df89c7.dualstack.awsglobalaccelerator.com ping statistics ---
        9 packets transmitted, 9 received, 0% packet loss, time 8014ms
        rtt min/avg/max/mdev = 8.664/9.838/13.674/1.413 ms

        $ sudo te-pathtrace -M tcp -p 443 data1.agt.thousandeyes.com
        Trace from 192.168.2.20 to 13.248.204.16:443
        1 *
        2 *
        3 *
        4 *
        5 *
        6 *
        7 *
        8 * (latency=-1)
    </pre>
     <p class="text-size-18 text-weight-300 base-margin-top text-justify">
     Same as in task 4 and task 6 we have and issue with communication over TCP port 443.
     Hit FIX task to resolve the issue with firewall.
     </p>
    <div class="row">
        <div class="col-md-12">
            <button class="btn btn--danger--right" ><a style="color: black" href="/task8">TASK 8</a></button>
        </div>
    </div>
</body>
{% endblock %}